<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RAG Serve â€” Chat Demo</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
</head>

<body class="bg-gray-100">

<div class="max-w-5xl mx-auto mt-10 p-4">

    <h1 class="text-3xl font-bold text-center mb-8">RAG Serve â€” RAG Chat Demo</h1>

    <!-- API KEY SETUP -->
    <div class="bg-white p-4 rounded shadow mb-6 border-l-4 border-purple-600">
        <h2 class="text-lg font-semibold mb-3">Setup: LLM Provider & API Key</h2>
        <div class="space-y-3">
            <div class="flex gap-2">
                <label class="w-32 flex items-center font-medium text-sm">Provider:</label>
                <select 
                    id="llm-provider" 
                    class="flex-1 border border-gray-300 rounded px-3 py-2"
                >
                    <option value="openai">OpenAI</option>
                    <option value="gemini">Google Gemini</option>
                </select>
            </div>
            <div class="flex gap-2">
                <input 
                    id="api-key-input" 
                    type="password" 
                    placeholder="Enter your API key"
                    class="flex-1 border border-gray-300 rounded px-3 py-2"
                />
                <button 
                    id="api-key-test-btn"
                    class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 whitespace-nowrap"
                >Test & Save</button>
            </div>
        </div>
        <p id="api-key-status" class="text-sm mt-2"></p>
    </div>

    <!-- FILE UPLOAD -->
    <div class="bg-white p-4 rounded shadow mb-6">
        <h2 class="text-lg font-semibold mb-3">Step 1: Upload & Index Document</h2>
        <div class="flex gap-2 mb-3">
            <input id="file-input" type="file" class="flex-1 border p-2 rounded" />
            <button 
                id="upload-btn"
                class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 whitespace-nowrap"
            >Upload & Index</button>
        </div>
        <p id="upload-status" class="text-sm"></p>
    </div>

    <!-- MAIN CHAT AREA -->
    <div class="bg-white p-4 rounded shadow">
        <h2 class="text-lg font-semibold mb-3">Step 2: Ask Questions</h2>

        <div class="grid grid-cols-3 gap-4">
            <!-- Chat Section (left 2/3) -->
            <div class="col-span-2">
                <div id="chat-box" class="rounded-lg border p-4 h-[50vh] overflow-y-auto mb-4 bg-gray-50"></div>
                
                <div class="flex gap-2">
                    <input 
                        id="user-input" 
                        type="text" 
                        placeholder="Ask something..."
                        class="flex-1 border border-gray-300 rounded-l px-3 py-2"
                    />
                    <button 
                        id="send-btn"
                        class="bg-blue-600 text-white px-4 rounded-r hover:bg-blue-700"
                    >Send</button>
                </div>
            </div>

            <!-- RAG Metrics Section (right 1/3) -->
            <div class="bg-gray-50 p-4 rounded border">
                <h3 class="font-semibold mb-3 text-sm">ðŸ“Š Retrieved Context</h3>
                <div id="metrics-box" class="space-y-3 text-sm max-h-[50vh] overflow-y-auto">
                    <p class="text-gray-500">No queries yet...</p>
                </div>
            </div>
        </div>
    </div>

</div>

<script src="script.js"></script>
</body>

<footer class="max-w-5xl mx-auto mt-10 p-4 text-center text-sm text-gray-600 border-t border-gray-300">
    <p>Personal project by <a href="https://github.com/vishalkoriyalearning" class="text-purple-600 hover:underline">vishalkoriyalearning</a></p>
    <p class="mt-1 text-xs text-gray-500">Note: Document indexing and retrieval work without an API key. API key is only required for answer generation.</p>
</footer>
